<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tropical Cyclone RI Case Studies</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/core.css">
    <link rel="stylesheet" href="css/layout.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-grid"></div>
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>

    
    <div id="app">
        <!-- Single Navbar -->
        <header id="navbar">
            <div id="controls">
                <!-- Left side: Title OR Player controls -->
                <div class="navbar-left">
                    <h1 class="site-title" id="site-title">
                        <span class="title-icon"><i class="fas fa-hurricane"></i></span>
                        <span class="title-text">TROPICAL CYCLONE</span>
                        <span class="title-accent">RI CASE STUDIES</span>
                    </h1>
                    
                    <!-- Player controls (hidden by default, replaces title) -->
                    <div id="player-controls" class="player-panel" style="display:none;">
                        <div class="playback-controls">
                            <button id="prev" class="control-btn" title="Previous Frame">
                                <i class="fas fa-step-backward"></i>
                            </button>
                            <button id="play-pause" class="control-btn play-btn" title="Play/Pause">
                                <i class="fas fa-play"></i>
                                <i class="fas fa-pause"></i>
                            </button>
                            <button id="next" class="control-btn" title="Next Frame">
                                <i class="fas fa-step-forward"></i>
                            </button>
                        </div>
                        
                        <div class="speed-control">
                            <label class="control-label">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>SPEED</span>
                            </label>
                            <input type="range" id="speed" min="0.1" max="20" step="0.1" value="1">
                            <span id="speed-value" class="speed-display">1.0x</span>
                        </div>
                        
                        <div class="loop-control">
                            <label class="toggle-label">
                                <input type="checkbox" id="loop" checked>
                                <span class="toggle-track">
                                    <span class="toggle-thumb"></span>
                                </span>
                                <span class="toggle-text">
                                    <i class="fas fa-repeat"></i>
                                    LOOP
                                </span>
                            </label>
                        </div>
                        
                        <div id="counter" class="frame-counter">
                            <span class="counter-label">FRAME</span>
                            <span class="counter-value">
                                <span id="current-num">0</span>
                                <span class="counter-divider">/</span>
                                <span id="image-count">0</span>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Right side: Navigation Buttons + About -->
                <div class="navbar-right">
                    <nav class="nav-buttons">
                        <!-- Storm Button -->
                        <div class="nav-btn-wrapper">
                            <button class="nav-btn" id="storm-btn" data-menu="storm-menu">
                                <i class="fas fa-hurricane"></i>
                                <span class="nav-btn-text">Storm</span>
                                <span class="nav-btn-value" id="storm-value">Select</span>
                                <i class="fas fa-chevron-down nav-btn-arrow"></i>
                            </button>
                            <div class="nav-dropdown" id="storm-menu">
                                <div class="dropdown-header">
                                    <i class="fas fa-hurricane"></i>
                                    <span>Select Storm</span>
                                </div>
                                <div class="dropdown-content" id="storm-options">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Primary Product Button -->
                        <div class="nav-btn-wrapper">
                            <button class="nav-btn" id="product1-btn" data-menu="product1-menu" disabled>
                                <i class="fas fa-layer-group"></i>
                                <span class="nav-btn-text">Primary</span>
                                <span class="nav-btn-value" id="product1-value">Select</span>
                                <i class="fas fa-chevron-down nav-btn-arrow"></i>
                            </button>
                            <div class="nav-dropdown" id="product1-menu">
                                <div class="dropdown-header">
                                    <i class="fas fa-layer-group"></i>
                                    <span>Primary Product</span>
                                </div>
                                <div class="dropdown-content" id="product1-options">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Secondary Product Button -->
                        <div class="nav-btn-wrapper">
                            <button class="nav-btn" id="product2-btn" data-menu="product2-menu" disabled>
                                <i class="fas fa-clone"></i>
                                <span class="nav-btn-text">Compare</span>
                                <span class="nav-btn-value" id="product2-value">None</span>
                                <i class="fas fa-chevron-down nav-btn-arrow"></i>
                            </button>
                            <div class="nav-dropdown" id="product2-menu">
                                <div class="dropdown-header">
                                    <i class="fas fa-clone"></i>
                                    <span>Compare With</span>
                                </div>
                                <div class="dropdown-content" id="product2-options">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- 3D View Button -->
                        <div class="nav-btn-wrapper">
                            <button class="nav-btn" id="view3d-btn" data-menu="view3d-menu" disabled>
                                <i class="fas fa-cube"></i>
                                <span class="nav-btn-text">3D View</span>
                                <span class="nav-btn-value" id="view3d-value">Select</span>
                                <i class="fas fa-chevron-down nav-btn-arrow"></i>
                            </button>
                            <div class="nav-dropdown" id="view3d-menu">
                                <div class="dropdown-header">
                                    <i class="fas fa-cube"></i>
                                    <span>3D Visualization</span>
                                </div>
                                <div class="dropdown-content" id="view3d-options">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>
                    </nav>
                    
                    <!-- About Button -->
                    <button class="icon-btn" id="about-btn" title="About">
                        <i class="fas fa-info"></i>
                    </button>
                </div>
            </div>

            <!-- Progress Bar (unified) -->
            <div id="progress-wrapper" style="display:none;">
                <input type="range" id="progress-slider" min="0" max="0" value="0">
                <div id="progress-track">
                    <div id="progress-fill"></div>
                </div>
                <div id="progress-thumb">
                    <div class="thumb-glow"></div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-container">
            <!-- PLACEHOLDER (landing) -->
            <div id="placeholder">
                <div class="placeholder-grid">
                    <div class="col-left">
                        <div class="hero-card">
                            <div class="hero-badge">
                                <i class="fas fa-database"></i>
                                <span>HYCOM OUTPUT</span>
                            </div>
                            <div class="hero-overlay">
                                <div class="hero-stats">
                                    <div class="stat-item">
                                        <span class="stat-value">2024</span>
                                        <span class="stat-label">Season</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value">CAT 5</span>
                                        <span class="stat-label">Peak Intensity</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value">RI</span>
                                        <span class="stat-label">Event Type</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-right">
                        <div class="products-header">
                            <h2>
                                <i class="fas fa-th-large header-icon"></i>
                                Available Products
                            </h2>
                            <p class="header-subtitle">Select storm to begin analysis</p>
                        </div>
                        <div class="example-grid">
                            <div class="example-card" data-category="fluxes">
                                <div class="card-glow"></div>
                                <div class="card-image">
                                    <img src="images/enthalpy_example.webp" alt="Enthalpy" class="example-img">
                                    <div class="card-badge">FLUX</div>
                                </div>
                                <div class="card-content">
                                    <h3>Enthalpy Fluxes</h3>
                                    <p>Ocean-atmosphere energy exchange</p>
                                </div>
                            </div>
                            <div class="example-card" data-category="thermal">
                                <div class="card-glow"></div>
                                <div class="card-image">
                                    <img src="images/temperature_example.webp" alt="Temperature" class="example-img">
                                    <div class="card-badge">TEMP</div>
                                </div>
                                <div class="card-content">
                                    <h3>Depth-Averaged SST</h3>
                                    <p>Thermal fronts & upwelling</p>
                                </div>
                            </div>
                            <div class="example-card" data-category="structure">
                                <div class="card-glow"></div>
                                <div class="card-image">
                                    <img src="images/cross_section_example.webp" alt="Cross-Section" class="example-img">
                                    <div class="card-badge">XSEC</div>
                                </div>
                                <div class="card-content">
                                    <h3>Depth Cross-Section</h3>
                                    <p>Vertical structure & gradients</p>
                                </div>
                            </div>
                            <div class="example-card" data-category="mixing">
                                <div class="card-glow"></div>
                                <div class="card-image">
                                    <img src="images/mixed_layer_example.webp" alt="Overlay" class="example-img">
                                    <div class="card-badge">MLD</div>
                                </div>
                                <div class="card-content">
                                    <h3>Mixed Layer Depth</h3>
                                    <p>Surface mixing & stratification</p>
                                </div>
                            </div>
                            <div class="example-card" data-category="temporal">
                                <div class="card-glow"></div>
                                <div class="card-image">
                                    <img src="images/line_plot_example.webp" alt="Line Plots" class="example-img">
                                    <div class="card-badge">TIME</div>
                                </div>
                                <div class="card-content">
                                    <h3>Depth-Transposed Lines</h3>
                                    <p>Temporal trends & variability</p>
                                </div>
                            </div>
                            <div class="example-card" data-category="salinity">
                                <div class="card-glow"></div>
                                <div class="card-image">
                                    <img src="images/salinity_example.webp" alt="Salinity" class="example-img">
                                    <div class="card-badge">SAL</div>
                                </div>
                                <div class="card-content">
                                    <h3>Depth-Averaged Salinity</h3>
                                    <p>Freshwater plumes & mixing</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DUAL VIEW (side-by-side images) -->
            <div id="dual-view" style="display:none;">
                <div class="image-frame image-frame-1">
                    <div class="frame-header">
                        <span class="frame-label">PRIMARY</span>
                        <span id="frame-title-1" class="frame-title">--</span>
                        <div class="overlay-controls" id="overlay-controls-1">
                            <label class="overlay-checkbox">
                                <input type="checkbox" id="wind-vectors-1" class="overlay-input">
                                <span class="overlay-check"></span>
                                <span class="overlay-label">Wind Vectors</span>
                            </label>
                            <label class="overlay-checkbox">
                                <input type="checkbox" id="radial-rings-1" class="overlay-input">
                                <span class="overlay-check"></span>
                                <span class="overlay-label">Radial Rings</span>
                            </label>
                        </div>
                    </div>
                    <img id="current-slide-1" src="" alt="Slide 1" class="dual-img">
                </div>
                <div class="image-frame image-frame-2">
                    <div class="frame-header">
                        <span class="frame-label">COMPARE</span>
                        <span id="frame-title-2" class="frame-title">--</span>
                        <div class="overlay-controls" id="overlay-controls-2">
                            <label class="overlay-checkbox">
                                <input type="checkbox" id="wind-vectors-2" class="overlay-input">
                                <span class="overlay-check"></span>
                                <span class="overlay-label">Wind Vectors</span>
                            </label>
                            <label class="overlay-checkbox">
                                <input type="checkbox" id="radial-rings-2" class="overlay-input">
                                <span class="overlay-check"></span>
                                <span class="overlay-label">Radial Rings</span>
                            </label>
                        </div>
                    </div>
                    <img id="current-slide-2" src="" alt="Slide 2" class="dual-img">
                </div>
            </div>

            <!-- SINGLE IMAGE (fallback) -->
            <div id="single-view" style="display:none;">
                <div class="image-frame single-frame">
                    <div class="frame-header">
                        <span class="frame-label">VIEW</span>
                        <span id="frame-title-single" class="frame-title">--</span>
                        <div class="overlay-controls" id="overlay-controls-single">
                            <label class="overlay-checkbox">
                                <input type="checkbox" id="wind-vectors-single" class="overlay-input">
                                <span class="overlay-check"></span>
                                <span class="overlay-label">Wind Vectors</span>
                            </label>
                            <label class="overlay-checkbox">
                                <input type="checkbox" id="radial-rings-single" class="overlay-input">
                                <span class="overlay-check"></span>
                                <span class="overlay-label">Radial Rings</span>
                            </label>
                        </div>
                    </div>
                    <img id="current-slide" src="" alt="Current slide">
                </div>
            </div>
        </main>
    </div>

    <!-- About Panel -->
    <div id="about-overlay"></div>
    <div id="about-panel">
        <button id="close-about" class="close-btn">
            <i class="fas fa-times"></i>
        </button>
        <div class="about-content">
            <div class="about-header">
                <div class="about-icon">
                    <i class="fas fa-hurricane"></i>
                </div>
                <h2>Tropical Cyclone RI Case Studies</h2>
                <p class="about-subtitle">Ocean Dynamics Visualization Platform</p>
            </div>
            
            <div class="about-section">
                <h3><i class="fas fa-info-circle"></i> Overview</h3>
                <p>Interactive time-series viewer for HYCOM model output including salinity, SSH, temperature, currents, and more. Analyze ocean dynamics during tropical cyclone events.</p>
            </div>
            
            <div class="about-section">
                <h3><i class="fas fa-keyboard"></i> Keyboard Controls</h3>
                <div class="shortcuts-grid">
                    <div class="shortcut">
                        <kbd>→</kbd>
                        <span>Next Frame</span>
                    </div>
                    <div class="shortcut">
                        <kbd>←</kbd>
                        <span>Previous Frame</span>
                    </div>
                    <div class="shortcut">
                        <kbd>Space</kbd>
                        <span>Play / Pause</span>
                    </div>
                </div>
            </div>
            
            <div class="about-section">
                <h3><i class="fas fa-database"></i> Data Source</h3>
                <p>US Tropics Consortium</p>
            </div>
            
            <div class="about-footer">
                <span class="version">v2.0</span>
            </div>
        </div>
    </div>

    <!-- Status Toast -->
    <div class="status-toast" id="status">
        <i class="fas fa-spinner fa-spin"></i>
        <span>Loading catalog...</span>
    </div>

    <!-- 3D Viewer Overlay -->
    <div id="viewer-3d-overlay">
        <div class="viewer-3d-header">
            <div class="viewer-3d-title">
                <i class="fas fa-cube"></i>
                <span id="viewer-3d-label">3D Isosurface View</span>
            </div>
            <div class="viewer-3d-controls">
                <span class="viewer-3d-frame">Frame: <span id="viewer-3d-frame-num">--</span></span>
                <button id="close-3d-viewer" class="close-3d-btn">
                    <i class="fas fa-times"></i>
                    <span>Close</span>
                </button>
            </div>
        </div>
        <!-- Material Design Loading Spinner -->
        <div id="viewer-3d-loader" class="viewer-3d-loader">
            <div class="loader-content">
                <div class="material-spinner">
                    <svg viewBox="0 0 50 50">
                        <circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle>
                    </svg>
                </div>
                <span class="loader-text">Loading 3D View...</span>
            </div>
        </div>
        <iframe id="viewer-3d-iframe" src="" frameborder="0"></iframe>
    </div>

    <script src="js/app.js"></script>
</body>
</html>